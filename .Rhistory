addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(overlayGroups = "DV")
#| eval: false
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles(c(OSM =  "OpenStreetMap", Topo = "Esri.WorldTopoMap",
Canvas = "Esri.WorldGrayCanvas", Imagery = "Esri.WorldImagery")) %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(overlayGroups = "DV")
#| eval: false
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addProviderTiles(c(OSM =  "OpenStreetMap", Topo = "Esri.WorldTopoMap",
Canvas = "Esri.WorldGrayCanvas", Imagery = "Esri.WorldImagery")) %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(overlayGroups = "DV")
#| eval: false
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles() %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(overlayGroups = "DV")
#| eval: false
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles(group = "OSM") %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(overlayGroups = "DV")
#| eval: false
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles(group = "OSM") %>%
addProviderTiles(provider = "Esri.WorldTopoMap", group = "Esri topo") %>%
addProviderTiles(provider = "Esri.WorldGrayCanvas", group = "Canvas") %>%
addProviderTiles(provider = "Esri.WorldImagery", group = "Imagery") %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(overlayGroups = "DV")
#| eval: false
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles(group = "OSM") %>%
addProviderTiles(provider = "Esri.WorldTopoMap", group = "Topo") %>%
addProviderTiles(provider = "Esri.WorldGrayCanvas", group = "Canvas") %>%
addProviderTiles(provider = "Esri.WorldImagery", group = "Imagery") %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(
baseGroups = c("OSM", "Topo", "Canvas", "Imagery"),
overlayGroups = "DV"
)
#| eval: false
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles(group = "OSM") %>%
addProviderTiles(provider = "Esri.WorldTopoMap", group = "Topo") %>%
addProviderTiles(provider = "Esri.WorldGrayCanvas", group = "Canvas") %>%
addProviderTiles(provider = "Esri.WorldImagery", group = "Imagery") %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(
baseGroups = c("OSM", "Topo", "Canvas", "Imagery"),
overlayGroups = "DV", options = layersControlOptions(collapse = FALSE)
)
tm_shape(shp = dv)+
tm_basemap() +
tm_view(set.view = c(39.2,-6.4,10)) +
tm_raster(style = "fisher", palette = oce::oce.colorsTwo(120), n = 7, stretch.palette = T, interpolate = T,group = "DV", title = "Broom Level")
#| echo: true
dv = terra::rast("Tanzania - Deviations Indicator.tiff")
div
#| echo: true
dv = terra::rast("Tanzania - Deviations Indicator.tiff")
dv
dv %>% summary()
dv %>% hist()
#| echo: true
#|
dv = dv %>% terra::clamp()
mchongo = dv %>%
terra::values() %>%
quantile(c(0.05,0.95), na.rm = T) %>%
as.vector()
#| echo: true
#|
dv = dv %>%
tidyterra::rename(dv = 1) %>%
tidyterra::filter(dv > mchongo[1] & div < 200)
#| echo: true
#|
dv = dv %>%
tidyterra::rename(dv = 1) %>%
tidyterra::filter(dv > mchongo[1] & dv < 200)
#| echo: true
#|
pal.image = colorNumeric(
palette = oce::oce.colorsTwo(120),
domain = terra::values(dv),
na.color = "transparent")
pal = colorNumeric(palette = c("#7f007f", "#0000ff",  "#007fff", "#00ffff", "#00bf00", "#7fdf00",
"#ffff00", "#ff7f00", "#ff3f00", "#ff0000", "#bf0000"),
values(dv),  na.color = "transparent")
#| eval: true
#| label: fig-fig1
#| fig-cap: The spatial distribution of algal broom across the Zanzibar Channel
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles(group = "OSM") %>%
addProviderTiles(provider = "Esri.WorldTopoMap", group = "Topo") %>%
addProviderTiles(provider = "Esri.WorldGrayCanvas", group = "Canvas") %>%
addProviderTiles(provider = "Esri.WorldImagery", group = "Imagery") %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(
baseGroups = c("OSM", "Topo", "Canvas", "Imagery"),
overlayGroups = "DV", options = layersControlOptions(collapse = FALSE)
)
#| echo: true
#|
dv = terra::rast("Tanzania - Deviations Indicator.tiff")
dv
dv %>% hist()
#| echo: true
#|
dv = dv %>% terra::clamp()
mchongo = dv %>%
terra::values() %>%
quantile(c(0.05,0.95), na.rm = T) %>%
as.vector()
#| echo: true
#|
dv = dv %>%
tidyterra::rename(dv = 1) %>%
tidyterra::filter(dv > mchongo[1] & dv < 300)
#| echo: true
#|
pal.image = colorNumeric(
palette = oce::oce.colorsTwo(120),
domain = terra::values(dv),
na.color = "transparent")
pal = colorNumeric(palette = c("#7f007f", "#0000ff",  "#007fff", "#00ffff", "#00bf00", "#7fdf00",
"#ffff00", "#ff7f00", "#ff3f00", "#ff0000", "#bf0000"),
values(dv),  na.color = "transparent")
#| eval: true
#| label: fig-fig1
#| fig-cap: The spatial distribution of algal broom across the Zanzibar Channel
#|
leaflet() %>%
setView(lng = 39.2, lat = -6.4, zoom = 10) %>%
addTiles(group = "OSM") %>%
addProviderTiles(provider = "Esri.WorldTopoMap", group = "Topo") %>%
addProviderTiles(provider = "Esri.WorldGrayCanvas", group = "Canvas") %>%
addProviderTiles(provider = "Esri.WorldImagery", group = "Imagery") %>%
addRasterImage(x = dv, colors = pal.image, opacity = 1, group = "DV") %>%
addLegend(pal = pal.image, values = values(dv), title = "Broom level", opacity = 1) %>%
addLayersControl(
baseGroups = c("OSM", "Topo", "Canvas", "Imagery"),
overlayGroups = "DV", options = layersControlOptions(collapse = FALSE)
)
#| echo: true
#|
dv = dv %>%
tidyterra::rename(dv = 1) %>%
tidyterra::filter(dv > mchongo[1])
dv %>% terra::as.data.frame()
dv %>% terra::as.data.frame(xy = TRUE)
dv %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot() %>%
metR::geom_contour_fill(aes(x = x, y = y, z = dv))
dv %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot() +
metR::geom_contour_fill(aes(x = x, y = y, z = dv))
require(sf)
zbar.channel = st_read("zanzibar_channel_extent.gpkg", quiet = TRUE)
zbar.channel
dv %>%
terra::crop(zbar.channel)
dv %>%
terra::crop(zbar.channel) %>%
tm_shape()%>%
tm_basemap() +
tm_view(set.view = c(39.2,-6.4,10)) +
tm_raster(
style = "fisher", palette = oce::oce.colorsTwo(120),
n = 7, stretch.palette = T,
interpolate = T,
group = "DV",
title = "Broom Level")
dv.crop = dv %>%
terra::crop(zbar.channel)
tm_shape(shp = dv.crop)%>%
tm_basemap() +
tm_view(set.view = c(39.2,-6.4,10)) +
tm_raster(
style = "fisher", palette = oce::oce.colorsTwo(120),
n = 7, stretch.palette = T,
interpolate = T,
group = "DV",
title = "Broom Level")
dv.crop
tm_shape(shp = dv.crop)+
tm_basemap() +
tm_view(set.view = c(39.2,-6.4,10)) +
tm_raster(
style = "fisher", palette = oce::oce.colorsTwo(120),
n = 7, stretch.palette = T,
interpolate = T,
group = "DV",
title = "Broom Level")
dv.crop = dv %>%
terra::crop(zbar.channel) %>%
terra::mask(zbar.channel)
tm_shape(shp = dv.crop)+
tm_basemap() +
tm_view(set.view = c(39.2,-6.4,10)) +
tm_raster(
style = "fisher", palette = oce::oce.colorsTwo(120),
n = 7, stretch.palette = T,
interpolate = T,
group = "DV",
title = "Broom Level")
dv.crop %>%
terra::as.data.frame(xy = TRUE)
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot() +
metR::geom_contour_fill(aes(x = x, y = y, z = dv))
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot() +
metR::geom_contour_fill(aes(x = x, y = y, z = dv))+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
metR::geom_contour2()+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
metR::geom_contour2(breaks = 200)+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
metR::geom_contour2(breaks = 200, aes(label = ..level..))+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
metR::geom_contour2(breaks = 150, aes(label = ..level..))+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
metR::geom_contour2(breaks = 80, aes(label = ..level..))+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
metR::geom_contour2(breaks = 250, aes(label = ..level..))+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
metR::geom_contour2(breaks = 250, aes(label = ..level..), size = 3)+
metR::scale_fill_divergent()
dv.crop %>%
terra::as.data.frame(xy = TRUE) %>%
ggplot(aes(x = x, y = y, z = dv)) +
metR::geom_contour_fill()+
# metR::geom_contour2(breaks = 250, aes(label = ..level..), size = 3)+
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
#| echo: true
zbar.channel = st_read("data/zanzibar_channel_extent.gpkg", quiet = TRUE)
regions = st_read("data/tz_regions.gpkg")
#| echo: true
zbar.channel = st_read("data/zanzibar_channel_extent.gpkg", quiet = TRUE)
regions = st_read("data/tz_regions.gpkg", quiet = T)
dv = terra::rast("Tanzania - Deviations Indicator.tiff")
dv = terra::rast("data/Tanzania - Deviations Indicator.tiff")
dv
regions
regions %>% st_drop_geometry()
regions %>% st_drop_geometry() %>% pull
regions
regions %>% filter(name  %in% c("DAR  ES SALAAM", "MJINI MAGHARIBI", "KUSINI", "KASKAZINI"))
regions %>% filter(name  %in% c("DAR  ES SALAAM", "MJINI MAGHARIBI", "KUSINI", "KASKAZINI")) %>% mapview::mapview()
aoi = regions %>% filter(name  %in% c("DAR  ES SALAAM", "MJINI MAGHARIBI", "KUSINI", "KASKAZINI"))
aoi
dv.crop.df = dv.crop %>%
terra::as.data.frame(xy = TRUE)
dv.crop.df
ggplot() +
metR::geom_contour_fill(aes(x = x, y = y, z = dv))+
# metR::geom_contour2(breaks = 250, aes(label = ..level..), size = 3)+
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
metR::geom_contour_fill(data dv.crop.df, aes(x = x, y = y, z = dv))+
dv.crop.df = dv.crop %>%
terra::as.data.frame(xy = TRUE)
ggplot() +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
# metR::geom_contour2(breaks = 250, aes(label = ..level..), size = 3)+
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
# metR::geom_contour2(breaks = 250, aes(label = ..level..), size = 3)+
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
aoi = regions %>% filter(name  %in% c("DAR  ES SALAAM", "MJINI MAGHARIBI", "KUSINI", "KASKAZINI", "PWANI"))
aoi
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
# metR::geom_contour2(breaks = 250, aes(label = ..level..), size = 3)+
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
aoi %>% slice()
aoi
aoi %>% slice(-4)
aoi
aoi %>% slice(-6)
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(39, 39.6), ylim = c(-7.8, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.8, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.4, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.2, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.1, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.75, 39.6), ylim = c(-7.1, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.75, 39.6), ylim = c(-7.1, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank())
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.75, 39.6), ylim = c(-7.1, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank())
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.75, 39.6), ylim = c(-7.1, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.75, 39.6), ylim = c(-7.0, -5.7)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.75, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .4))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw() +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
ggplot() +
ggspatial::layer_spatial(data = aoi)+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw(base_size = 10) +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
ggplot() +
ggspatial::layer_spatial(data = aoi, fill = "#d0c79d")+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw(base_size = 10) +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
#| eval: true
#| label: fig-fig3
#| fig-cap: The spatial distribution of algal broom across the coastal waters of Bagamoyo and Dar es Salaam
#|
ggplot() +
ggspatial::layer_spatial(data = aoi, fill = "#d0c79d")+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw(base_size = 12) +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
#| eval: true
#| label: fig-fig3
#| fig-cap: The spatial distribution of algal broom across the coastal waters of Bagamoyo and Dar es Salaam
#|
ggplot() +
ggspatial::layer_spatial(data = aoi, fill = "black")+
geom_sf_text(data = aoi, aes(label = name)) +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw(base_size = 12) +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
#| eval: true
#| label: fig-fig3
#| fig-cap: The spatial distribution of algal broom across the coastal waters of Bagamoyo and Dar es Salaam
#|
ggplot() +
ggspatial::layer_spatial(data = aoi, fill = "black")+
geom_sf_text(data = aoi, aes(label = name),  color = "white") +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw(base_size = 12) +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
#| eval: true
#| label: fig-fig3
#| fig-cap: The spatial distribution of algal broom across the coastal waters of Bagamoyo and Dar es Salaam
#|
ggplot() +
ggspatial::layer_spatial(data = aoi, fill = "#8FBC8F")+
geom_sf_text(data = aoi, aes(label = name),  color = "white") +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw(base_size = 12) +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
#| eval: true
#| label: fig-fig3
#| fig-cap: The spatial distribution of algal broom across the coastal waters of Bagamoyo and Dar es Salaam
#|
ggplot() +
ggspatial::layer_spatial(data = aoi, fill = "#BEBD7F")+
geom_sf_text(data = aoi, aes(label = name),  color = "white") +
metR::geom_contour_fill(data = dv.crop.df, aes(x = x, y = y, z = dv))+
coord_sf(xlim = c(38.8, 39.6), ylim = c(-7.0, -5.9)) +
scale_fill_gradientn(colours = oce::oceColorsTwo(120))+
theme_bw(base_size = 12) +
theme(axis.title = element_blank(), panel.background = element_rect(fill = "lightblue"), panel.grid = element_line(linetype = 3, linewidth = .5))
